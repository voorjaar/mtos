!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).mtos={})}(this,(function(e){"use strict";var t;var n="undefined"==typeof document?void 0:document,o=!!n&&"content"in n.createElement("template"),r=!!n&&n.createRange&&"createContextualFragment"in n.createRange();function i(e){return e=e.trim(),o?function(e){var t=n.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(e):r?function(e){return t||(t=n.createRange()).selectNode(n.body),t.createContextualFragment(e).childNodes[0]}(e):function(e){var t=n.createElement("body");return t.innerHTML=e,t.childNodes[0]}(e)}function a(e,t){var n,o,r=e.nodeName,i=t.nodeName;return r===i||(n=r.charCodeAt(0),o=i.charCodeAt(0),n<=90&&o>=97?r===i.toUpperCase():o<=90&&n>=97&&i===r.toUpperCase())}function d(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var l={OPTION:function(e,t){var n=e.parentNode;if(n){var o=n.nodeName.toUpperCase();"OPTGROUP"===o&&(o=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==o||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}d(e,t,"selected")},INPUT:function(e,t){d(e,t,"checked"),d(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var o=e.firstChild;if(o){var r=o.nodeValue;if(r==n||!n&&r==e.placeholder)return;o.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,o,r=-1,i=0,a=e.firstChild;a;)if("OPTGROUP"===(o=a.nodeName&&a.nodeName.toUpperCase()))a=(n=a).firstChild;else{if("OPTION"===o){if(a.hasAttribute("selected")){r=i;break}i++}!(a=a.nextSibling)&&n&&(a=n.nextSibling,n=null)}e.selectedIndex=r}}};function u(){}function c(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}var f=function(e){return function(t,o,r){if(r||(r={}),"string"==typeof o)if("#document"===t.nodeName||"HTML"===t.nodeName||"BODY"===t.nodeName){var d=o;(o=n.createElement("html")).innerHTML=d}else o=i(o);var f=r.getNodeKey||c,s=r.onBeforeNodeAdded||u,p=r.onNodeAdded||u,m=r.onBeforeElUpdated||u,h=r.onElUpdated||u,v=r.onBeforeNodeDiscarded||u,b=r.onNodeDiscarded||u,N=r.onBeforeElChildrenUpdated||u,T=!0===r.childrenOnly,g=Object.create(null),A=[];function y(e){A.push(e)}function C(e,t){if(1===e.nodeType)for(var n=e.firstChild;n;){var o=void 0;t&&(o=f(n))?y(o):(b(n),n.firstChild&&C(n,t)),n=n.nextSibling}}function S(e,t,n){!1!==v(e)&&(t&&t.removeChild(e),b(e),C(e,n))}function E(e){p(e);for(var t=e.firstChild;t;){var n=t.nextSibling,o=f(t);if(o){var r=g[o];r&&a(t,r)?(t.parentNode.replaceChild(r,t),x(r,t)):E(t)}else E(t);t=n}}function x(t,o,r){var i=f(o);if(i&&delete g[i],!r){if(!1===m(t,o))return;if(e(t,o),h(t),!1===N(t,o))return}"TEXTAREA"!==t.nodeName?function(e,t){var o,r,i,d,u,c=t.firstChild,p=e.firstChild;e:for(;c;){for(d=c.nextSibling,o=f(c);p;){if(i=p.nextSibling,c.isSameNode&&c.isSameNode(p)){c=d,p=i;continue e}r=f(p);var m=p.nodeType,h=void 0;if(m===c.nodeType&&(1===m?(o?o!==r&&((u=g[o])?i===u?h=!1:(e.insertBefore(u,p),r?y(r):S(p,e,!0),p=u):h=!1):r&&(h=!1),(h=!1!==h&&a(p,c))&&x(p,c)):3!==m&&8!=m||(h=!0,p.nodeValue!==c.nodeValue&&(p.nodeValue=c.nodeValue))),h){c=d,p=i;continue e}r?y(r):S(p,e,!0),p=i}if(o&&(u=g[o])&&a(u,c))e.appendChild(u),x(u,c);else{var v=s(c);!1!==v&&(v&&(c=v),c.actualize&&(c=c.actualize(e.ownerDocument||n)),e.appendChild(c),E(c))}c=d,p=i}!function(e,t,n){for(;t;){var o=t.nextSibling;(n=f(t))?y(n):S(t,e,!0),t=o}}(e,p,r);var b=l[e.nodeName];b&&b(e,t)}(t,o):l.TEXTAREA(t,o)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var n=t.firstChild;n;){var o=f(n);o&&(g[o]=n),e(n),n=n.nextSibling}}(t);var w,O,U=t,R=U.nodeType,L=o.nodeType;if(!T)if(1===R)1===L?a(t,o)||(b(t),U=function(e,t){for(var n=e.firstChild;n;){var o=n.nextSibling;t.appendChild(n),n=o}return t}(t,(w=o.nodeName,(O=o.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==O?n.createElementNS(O,w):n.createElement(w)))):U=o;else if(3===R||8===R){if(L===R)return U.nodeValue!==o.nodeValue&&(U.nodeValue=o.nodeValue),U;U=o}if(U===o)b(t);else{if(o.isSameNode&&o.isSameNode(U))return;if(x(U,o,T),A)for(var V=0,I=A.length;V<I;V++){var P=g[A[V]];P&&S(P,P.parentNode,!1)}}return!T&&U!==t&&t.parentNode&&(U.actualize&&(U=U.actualize(t.ownerDocument||n)),t.parentNode.replaceChild(U,t)),U}}((function(e,t){var n,o,r,i,a=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var d=a.length-1;d>=0;d--)o=(n=a[d]).name,i=n.value,(r=n.namespaceURI)?e.getAttributeNS(r,o=n.localName||o)!==i&&("xmlns"===n.prefix&&(o=n.name),e.setAttributeNS(r,o,i)):e.getAttribute(o)!==i&&e.setAttribute(o,i);for(var l=e.attributes,u=l.length-1;u>=0;u--)o=(n=l[u]).name,(r=n.namespaceURI)?t.hasAttributeNS(r,o=n.localName||o)||e.removeAttributeNS(r,o):t.hasAttribute(o)||e.removeAttribute(o)}})),s=f;const p=[],m={filter:v,scroll:{enable:!0,top:0,left:0,behavior:"smooth"}};var h=m;function v({href:e,target:t,host:n}){return n===window.location.host&&e.split("#")[0]!==window.location.href.split("#")[0]&&(""===t||"_self"===t)}function b(e,t={}){return fetch(e,h.fetch).then((e=>e.text())).then((n=>{var o;const r=document.createElement("html");r.innerHTML=n,!1!==t.pushState&&(p.push({top:document.body.scrollTop,left:document.body.scrollLeft}),history.pushState({},(null===(o=document.head.querySelector("title"))||void 0===o?void 0:o.innerText)||"Document",e));const i=r.querySelector("head"),a=r.querySelector("body");i&&s(document.head,i),a&&s(document.body,a,h);const d=t.scroll||h.scroll;(null==d?void 0:d.enable)&&window.scrollTo(d),N()})),!1}function N(){document.querySelectorAll("a").forEach((e=>{h.filter(e)&&(e.onclick=()=>b(e.href))}))}window.addEventListener("load",N),window.addEventListener("popstate",(()=>{b(document.location.href,{pushState:!1,scroll:Object.assign({enable:!0,behavior:"auto"},p.pop()||{top:0,left:0})})})),e.check=v,e.goto=b,e.mtos=N,e.setup=function(e){h=Object.assign(Object.assign({},m),e)}}));
