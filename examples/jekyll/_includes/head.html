<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {%- seo -%}
  <link rel="stylesheet" href="/assets/style.css">
  <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}
  <script src="https://cdn.jsdelivr.net/npm/mtos@0.7.0/dist/mtos-iife.min.js"></script>
  <script>
    function updateProgress(/** @type {number} */n) {
      const bar = document.querySelector(".progress-bar");
      if (!bar) return;
      bar.style.width = n + "%";
    }

    mtos.setup({
      onBeforeElUpdated(fromEl, toEl) {
        if (toEl.tagName === "MAIN") {
          toEl.classList.add("animated", "fadeIn");
        }
      },
      onElUpdated(el) {
         if (el.tagName === "MAIN") {
          setTimeout(() => {
            el.classList.remove("animated", "fadeIn");
          }, 250)
        }
      },
      onFetchStart() {
        updateProgress(0);
      },
      onFetchEnd() {
        updateProgress(60);
      },
      onBeforePageRendered() {
        updateProgress(80);
      },
      onPageRendered() {
        updateProgress(100);
      }
    })
  </script>
</head>
